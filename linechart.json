{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "description": "Food vs Crop Index in Australia (2014–2022)",
  "title": {
    "text": "Australia: Food Access vs Crop Output Index (2014–2022)",
    "font": "Garamond",
    "fontSize": 18,
    "fontWeight": "bold",
    "anchor": "start",
    "color": "black"
  },
  "width": 600,
  "height": 400,
  "data": {
    "url": "https://raw.githubusercontent.com/ywuu0346-bot/new-A2/main/data/dv2data%20by%20country.csv"
  },
  "transform": [
    { "filter": "datum['Country Name'] === 'Australia'" },
    { "filter": "datum.Year < 2023" },
    {
      "fold": ["food_index", "crop_index"],
      "as": ["Index Type", "Index Value"]
    }
  ],
  "layer": [
    {
      "mark": {
        "type": "line",
        "point": { "filled": true, "size": 50 }
      },
      "encoding": {
        "x": {
          "field": "Year",
          "type": "ordinal",
          "title": "Year",
          "axis": {
            "labelFont": "Garamond",
            "labelFontSize": 12,
            "labelColor": "#333",
            "titleFont": "Garamond",
            "titleFontSize": 13,
            "titleFontWeight": "bold",
            "titleColor": "#333"
          }
        },
        "y": {
          "field": "Index Value",
          "type": "quantitative",
          "title": "Index Value",
          "axis": {
            "labelFont": "Garamond",
            "labelFontSize": 12,
            "labelColor": "#333",
            "titleFont": "Garamond",
            "titleFontSize": 13,
            "titleFontWeight": "bold",
            "titleColor": "#333"
          }
        },
        "color": {
          "field": "Index Type",
          "type": "nominal",
          "title": "Index Type",
          "scale": {
            "domain": ["food_index", "crop_index"],
            "range": ["brown", "orange"]
          },
          "legend": {
            "labelExpr": "datum.label === 'food_index' ? 'Food Index' : 'Crop Index'",
            "labelFont": "Garamond",
            "labelFontSize": 13,
            "labelColor": "#333",
            "titleFont": "Garamond",
            "titleFontSize": 14,
            "titleFontWeight": "bold",
            "titleColor": "#222"
          }
        },
        "tooltip": [
          { "field": "Year", "type": "ordinal" },
          { "field": "Index Type", "type": "nominal", "title": "Type" },
          {
            "field": "Index Value",
            "type": "quantitative",
            "format": ".2f",
            "title": "Value"
          }
        ]
      }
    },
    {
      "data": {
        "values": [
          {
            "Year": "2020",
            "Index Value": 90,
            "text": "COVID-19 impact"
          }
        ]
      },
      "mark": {
        "type": "text",
        "dy": -25,
        "dx": -35,
        "fontSize": 14,
        "font": "Garamond",
        "fontWeight": "lighter",
        "color": "#666"
      },
      "encoding": {
        "x": { "field": "Year", "type": "ordinal" },
        "y": { "field": "Index Value", "type": "quantitative" },
        "text": { "field": "text", "type": "nominal" }
      }
    }
  ],
  "config": {
    "font": "Garamond"
  }
}